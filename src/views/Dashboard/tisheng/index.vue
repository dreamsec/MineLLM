<template>
  <div class="dashboard-container" >
    <!-- é¡¶éƒ¨æ ‡é¢˜åŒº -->
    <div class="dashboard-header">
			<img src="@/assets/img/up.png" class="header-bg" alt="header-bg" />
			<div class="header-title">æå‡æœºå­ªç”Ÿå¹³å°</div>
		</div>


    <!-- ä¸»ä½“å†…å®¹åŒº -->
    <div class="dashboard-main">
      <!-- ä¸­å¤®3DåŒºåŸŸ - å¸ƒæ»¡æ•´ä¸ªé¡µé¢ -->
      <div class="center-panel">
        <iframe
          src="/NewElevator/index.html"
          style="width:100%; height:100%; border:none; background:transparent;"
          allowfullscreen
        ></iframe>
      </div>

      <!-- å·¦ä¾§æ•°æ®åŒº - é€æ˜æµ®å±‚ -->
      <div class="left-panel">
        <!-- æ™ºæ…§å›­åŒºæ•°æ®å±•ç¤º -->
        <div class="panel-section1">
          <div class="section-title1">
            <span class="title-text">æå‡æœºè¿è¡Œæƒ…å†µ</span>
            <div class="title-line"></div>
          </div>

          <!-- æ•°æ®å¡ç‰‡ç»„ -->
          <div class="data-cards">
            <div class="data-card">
              <div class="card-icon">ğŸ¢</div>
              <div class="card-content">
                <div class="card-value">130</div>
                <div class="card-label">æå‡æœºæ€»æ•°</div>
                <!-- <div class="card-unit">+2
                  <n-icon size="16">
                  <ArrowUpOutlined/>
                </n-icon>
                </div> -->
              </div>
            </div>
            <div class="data-card">
              <div class="card-icon">ğŸ¢</div>
              <div class="card-content">
                <div class="card-value">13</div>
                <div class="card-label">åœ¨çº¿è®¾å¤‡</div>
                <!-- <div class="card-unit">+1
                   <n-icon size="16">
                     <ArrowUpOutlined/>
                   </n-icon>
                </div> -->
              </div>
            </div>
            <div class="data-card">
              <div class="card-icon">ğŸ¢</div>
              <div class="card-content">
                <div class="card-value">4</div>
                <div class="card-label">å‘Šè­¦æ•°é‡</div>
                <!-- <div class="card-unit">å¹³æ–¹ç±³</div> -->
              </div>
            </div>
            <div class="data-card">
              <div class="card-icon">ğŸ¢</div>
              <div class="card-content">
                <div class="card-value">94.2%</div>
                <div class="card-label">è¿è¡Œæ•ˆç‡</div>
                <!-- <div class="card-unit"></div> -->
              </div>
            </div>
          </div>
        </div>

        <!-- æ™ºæ…§å›­åŒºæ•°æ®å±•ç¤º -->
        <div class="panel-section1">
          <div class="section-title">
            <span class="title-text">æå‡æœºå¥åº·çŠ¶æ€</span>
            <div class="title-line"></div>
          </div>

          <!-- è¿›åº¦æ¡æ•°æ® -->
          <div class="progress-data">
            <div class="progress-item">
              <div class="progress-label">ä¸»ç”µæœºç³»ç»Ÿ</div>
              <div class="progress-bar">
                <div class="progress-fill green" style="width: 92%"></div>
              </div>
              <div class="progress-value">92%</div>
            </div>
            <div class="progress-item">
              <div class="progress-label">åˆ¶åŠ¨ç³»ç»Ÿ</div>
              <div class="progress-bar">
                <div class="progress-fill green" style="width: 88%"></div>
              </div>
              <div class="progress-value">88%</div>
            </div>
            <div class="progress-item">
              <div class="progress-label">é’¢ä¸ç»³çŠ¶æ€</div>
              <div class="progress-bar">
                <div class="progress-fill yellow" style="width: 85%"></div>
              </div>
              <div class="progress-value">85%</div>
            </div>
            <div class="progress-item">
              <div class="progress-label">æ¶²å‹ç³»ç»Ÿ</div>
              <div class="progress-bar">
                <div class="progress-fill green" style="width: 90%"></div>
              </div>
              <div class="progress-value">90%</div>
            </div>
            <div class="progress-item">
              <div class="progress-label">æ§åˆ¶ç³»ç»Ÿ</div>
              <div class="progress-bar">
                <div class="progress-fill green" style="width: 95%"></div>
              </div>
              <div class="progress-value">95%</div>
            </div>
            <div class="progress-item">
              <div class="progress-label">å®‰å…¨ä¿æŠ¤ç³»ç»Ÿ</div>
              <div class="progress-bar">
                <div class="progress-fill green" style="width: 98%"></div>
              </div>
              <div class="progress-value">98%</div>
            </div>
          </div>
        </div>

        <!-- æ™ºæ…§å›­åŒºæ•°æ®å±•ç¤º - åœ†å½¢å›¾è¡¨ -->
         <!-- æå‡æœºè¿è¡Œæ•°æ®ç»Ÿè®¡ -->
        <div class="panel-section1">
          <div class="section-title">
            <span class="title-text">æå‡æœºè¿è¡Œæ•°æ®ç»Ÿè®¡</span>
            <div class="title-line"></div>
          </div>

          <div class="circle-charts">
            <div class="circle-chart">
              <div class="chart-circle">
                <svg viewBox="0 0 100 100">
                  <circle cx="50" cy="50" r="40" class="chart-bg"/>
                  <circle cx="50" cy="50" r="40" class="chart-fg" stroke-dasharray="251.2" stroke-dashoffset="62.8"/>
                </svg>
                <div class="chart-value">156</div>
              </div>
              <div class="chart-labels">
                <div class="chart-label">ä»Šæ—¥æå‡æ¬¡æ•°</div>
                <div class="chart-data">
                  <div>æå‡é«˜åº¦: 680m</div>
                  <div>è½½é‡: 12å¨/æ¬¡</div>
                </div>
              </div>
            </div>
            <div class="circle-chart">
              <div class="chart-circle">
                <svg viewBox="0 0 100 100">
                  <circle cx="50" cy="50" r="40" class="chart-bg"/>
                  <circle cx="50" cy="50" r="40" class="chart-fg" stroke-dasharray="251.2" stroke-dashoffset="37.68"/>
                </svg>
                <div class="chart-value">94.7%</div>
              </div>
              <div class="chart-labels">
                <div class="chart-label">è¿è¡Œæ•ˆç‡</div>
                <div class="chart-data">
                  <div>æ•…éšœæ¬¡æ•°: 0</div>
                  <div>å¯ç”¨ç‡: 98.5%</div>
                </div>
              </div>
            </div>
          </div>
        </div>


      </div>

      <!-- å³ä¾§æ•°æ®åŒº - é€æ˜æµ®å±‚ -->
      <div class="right-panel">
        <!-- æ™ºæ…§å›­åŒºæ•°æ®å±•ç¤º -->
        <div class="panel-section1">
          <div class="section-title1">
            <span class="title-text">ç¯å¢ƒç›‘æ§</span>
            <div class="title-line"></div>
          </div>


          <div class="env-cards">
            <div class="env-card">
              <img class="env-icon" src="@/assets/img/wen.png" alt="æ¸©åº¦">
              <div class="env-content">
                <div class="env-value">28â„ƒ</div>
                <div class="env-label">äº•ä¸‹æ¸©åº¦</div>
                <div class="env-unit green">æ­£å¸¸èŒƒå›´</div>
              </div>
            </div>
            <div class="env-card">
              <img class="env-icon" src="@/assets/img/feng.png" alt="é£é€Ÿ">
              <div class="env-content">
                <div class="env-value">2.3m/s</div>
                <div class="env-label">é£é€Ÿ</div>
                <div class="env-unit green">æ­£å¸¸èŒƒå›´</div>
              </div>
            </div>
            <div class="env-card">
              <img class="env-icon" src="@/assets/img/shi.png" alt="ç©ºæ°”æ¹¿åº¦">
              <div class="env-content">
                <div class="env-value">65%</div>
                <div class="env-label">ç©ºæ°”æ¹¿åº¦</div>
                <div class="env-unit yellow">ç¨é«˜</div>
              </div>
            </div>
            <div class="env-card">
              <img class="env-icon" src="@/assets/img/nong.png" alt="æ°”ä½“æµ“åº¦">
              <div class="env-content">
                <div class="env-value">0.02%</div>
                <div class="env-label">æ°”ä½“æµ“åº¦</div>
                <div class="env-unit green">æ­£å¸¸èŒƒå›´</div>
              </div>
            </div>
          </div>

        </div>

        <!-- æ™ºæ…§å›­åŒºæ•°æ®å±•ç¤º - é¥¼å›¾ -->
        <div class="panel-section1">
          <div class="section-title">
            <span class="title-text">æ™ºæ…§å›­åŒºæ•°æ®å±•ç¤º</span>
            <div class="title-line"></div>
          </div>

          <div class="panel-section1">
            <div class="chart-container" ref="chartRef"></div>
          </div>

        </div>

        <!-- æ™ºæ…§å›­åŒºæ•°æ®å±•ç¤º - å…³é”®è®¾å¤‡ -->
        <div class="panel-section1">
          <div class="section-title">
            <span class="title-text">å…³é”®è®¾å¤‡</span>
            <div class="title-line"></div>
          </div>

           <div class="icon-data">
            <div class="icon-item">
              <div class="icon-3d">ğŸ¢</div>
              <div class="icon-info">
                <div class="info-left">
                  <div class="icon-label">ä¸»æå‡æœº#1</div>
                  <div class="icon-value">æ¸©åº¦ï¼š65â„ƒ  è¿è¡Œï¼š72h</div>
                </div>
                <div class="icon-unit">æ­£å¸¸</div>
              </div>
            </div>
            <div class="icon-item">
              <div class="icon-3d">ğŸ¢</div>
              <div class="icon-info">
                <div class="info-left">
                  <div class="icon-label">ä¸»æå‡æœº#2</div>
                  <div class="icon-value">æ¸©åº¦ï¼š55â„ƒ  è¿è¡Œï¼š12h</div>
                </div>
                <div class="icon-unit orange">é¢„è­¦</div>
              </div>
            </div>
            <!-- <div class="icon-item">
              <div class="icon-3d">ğŸ¢</div>
              <div class="icon-info">
                <div class="info-left">
                  <div class="icon-label">è¿è¾“çš®å¸¦#5</div>
                  <div class="icon-value">æ¸©åº¦ï¼š65â„ƒ  è¿è¡Œï¼š72h</div>
                </div>
                <div class="icon-unit">æ­£å¸¸</div>
              </div>
            </div> -->
          </div>


        </div>


      </div>
    </div>

  </div>
</template>

<script setup lang="ts">
// æ™ºæ…§æ¥¼å®‡å¯è§†åŒ–æŒ‡æŒ¥ä¸­å¿ƒ
defineOptions({
  name: 'DashboardIndex'
})

import {ref, onMounted, onUnmounted} from 'vue'
import * as echarts from 'echarts'

const chartRef = ref<HTMLElement | null>(null)
let chart: echarts.ECharts | null = null

// æ ¹æ®çª—å£é«˜åº¦è®¡ç®—å›¾è¡¨é«˜åº¦
const calculateChartHeight = (windowHeight: number): number => {
  // åŸºç¡€é«˜åº¦
  let baseHeight = 200

  if (windowHeight < 600) {
    baseHeight = 120  // æå°å±å¹•
  } else if (windowHeight < 900) {
    baseHeight = 160  // å°å±å¹•
  } else if (windowHeight < 1000) {
    baseHeight = 180  // ä¸­ç­‰å±å¹•
  } else if (windowHeight < 1200) {
    baseHeight = 200  // å¤§å±å¹•
  } else {
    baseHeight = 220  // è¶…å¤§å±å¹•
  }

  return baseHeight
}

const initChart = () => {
  if (chartRef.value) {
    // æ ¹æ®çª—å£é«˜åº¦åŠ¨æ€è®¾ç½®å›¾è¡¨å®¹å™¨é«˜åº¦
    const windowHeight = window.innerHeight
    const chartHeight = calculateChartHeight(windowHeight)
    chartRef.value.style.height = chartHeight + 'px'
    chart = echarts.init(chartRef.value)
    const xData = ["æå‡æ•ˆç‡", "æå‡é€Ÿåº¦", "è½½é‡çŠ¶æ€", "åˆ¶åŠ¨ç³»ç»Ÿ", "å®‰å…¨æŒ‡æ•°"]

    const percent = [94, 87, 76, 100, 92]

    const imgList: Array<{
      coord: [number, number];
      symbolSize: [number, number];
      symbolKeepAspect: boolean;
      symbolOffset: [number, number];
      symbol: string;
    }> = []
    const iconData: Array<{
      value: number;
      symbolPosition: string;
    }> = []

    percent.forEach((item, index) => {
      imgList.push({
        coord: [index, item],
        symbolSize: [100, 50],
        symbolKeepAspect: true,
        symbolOffset: [-40, -185],
        symbol: "circle",
      })
      iconData.push({
        value: item,
        symbolPosition: 'end',
      })
    })

    const option = {
      tooltip: {
        trigger: 'axis',
        backgroundColor: "rgba(7,55,63,0.7)",
        borderColor: "rgba(7,55,63,0.7)",
        textStyle: {
          color: '#fff',
        },
        formatter: function (params: Array<{marker: string, name: string, value: number}>) {
          return params[0].marker + '' + params[0].name + ': ' + params[0].value + '%'
        }
      },
      grid: {
        top: '10%',
        bottom: '10%',
        right: 0,
        left: 0,
      },
      xAxis: {
        data: xData,
        axisTick: {
          show: false
        },
        axisLine: {
          show: false
        },
        axisLabel: {
          show: true,
          textStyle: { color: '#fff', fontSize: 11 },
          interval: 0,
          formatter: function(value: string) {
            // é•¿æ–‡å­—åˆ†ä¸¤è¡Œæ˜¾ç¤º
            if (value.length > 3) {
              return value.substring(0, 2) + '\n' + value.substring(2)
            }
            return value
          }
        }
      },
      yAxis: {
        max: 110,
        splitLine: {
          show: false
        },
        axisTick: {
          show: false
        },
        axisLine: {
          show: false
        },
        axisLabel: {
          show: false
        }
      },
      series: [
        {
          name: 'æƒå±æƒ…å†µ',
          type: 'pictorialBar',
          symbolSize: [30, 12],
          symbolOffset: [0, -7],
          z: 12,
          itemStyle: {
            normal: {
              color: '#14b1eb',
              opacity: 0.5,
            }
          },
          data: iconData
        },
        {
          name: '',
          type: 'pictorialBar',
          symbolSize: [40, 15],
          symbolOffset: [0,-2],
          z: 10,
          itemStyle: {
            normal: {
              color: 'transparent',
              borderColor: '#14b1eb',
              borderType: 'solid',
              borderWidth: 5
            }
          },
          data: iconData
        },
        {
          name: '',
          type: 'pictorialBar',
          symbolSize: [30, 12],
          symbolOffset: [0, -5],
          z: 10,
          itemStyle: {
            normal: {
              color: 'transparent',
              borderColor: '#14b1eb',
              borderType: 'solid',
              borderWidth: 5
            }
          },
          data: iconData
        },
        {
          name: '',
          type: 'pictorialBar',
          symbolSize: [15, 5],
          symbolOffset: [0, -5],
          z: 12,
          itemStyle: {
            normal: {
              color: 'rgb(9,227,255)'
            }
          },
          data: iconData
        },
        {
          type: 'bar',
          itemStyle: {
            normal: {
              color: {
                x: 0,
                y: 0,
                x2: 0,
                y2: 1,
                type: 'linear',
                global: false,
                colorStops: [{
                  offset: 0,
                  color: "rgb(24,118,158)"
                }, {
                  offset: 1,
                  // color: "rgba(9,30,41,0.5)"
                  color:"rgba(26, 35, 50, 0.5)"
                }]
              }
            }
          },
          barWidth: 30,
          data: percent,
          label: {
            show: true,
            position: 'top',
            distance: 15,
            color: '#fff',
            fontSize: 12,
            formatter: (params: { dataIndex: number, value: number }) => {
              return '{b|' + params.value + '%}'
            },
            rich: {
              a: {
                color: '#03adff',
                fontSize: 12,
                fontWeight: 'bold'
              },
              b: {
                color: '#fff',
                fontSize: 12,
                marginTop: 15,
              }
            }
          },
          markPoint: {
            data: imgList
          }
        }
      ]
    }

    chart.setOption(option)
  }
}

const resizeChart = () => {
   if (chart && chartRef.value) {
    const windowHeight = window.innerHeight;

    // åŠ¨æ€è°ƒæ•´å®¹å™¨é«˜åº¦
    const newHeight = calculateChartHeight(windowHeight)
    chartRef.value.style.height = newHeight + 'px'

    // é‡æ–°è°ƒæ•´å›¾è¡¨å¤§å°
    chart.resize()

    // æ ¹æ®çª—å£é«˜åº¦è°ƒæ•´Yè½´æœ€å¤§å€¼
    let newMax = 110;

    if (windowHeight < 600) {
      newMax = 160;
    } else if (windowHeight < 900) {
      newMax = 140;
    } else if (windowHeight < 1000) {
      newMax = 130;
    } else {
      newMax = 100;
    }

    chart.setOption(
      {
        yAxis: {
          max: newMax
        },
        grid: {
          top: '10%',
          bottom: '10%',
          right: 0,
          left: 0,
        }
      },
      false
    )

  }
}

onMounted(() => {
  initChart()
  window.addEventListener('resize', resizeChart)
})

onUnmounted(() => {
  chart?.dispose()
  window.removeEventListener('resize', resizeChart)
})
</script>

<style scoped>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.dashboard-container {
  width: 100%; /* ä½¿ç”¨100%å®½åº¦è‡ªé€‚åº”çˆ¶å®¹å™¨ */
  height: calc(100vh - 100px);
  background: #001440;
  color: #ffffff;
  font-family: 'Microsoft YaHei', Arial, sans-serif;
  overflow: hidden; /* å®Œå…¨éšè—æ»šåŠ¨æ¡ */
  display: flex;
  flex-direction: column;
  position: relative; /* ä¸ºå†…éƒ¨å›ºå®šå®šä½å…ƒç´ å»ºç«‹å®šä½ä¸Šä¸‹æ–‡ */
}


.dashboard-header {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 80px;
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 100;
	/* background: linear-gradient(rgba(10,26,42) 80%, rgba(10,26,42,0.9) 100%); */
}
.header-bg {
	position: absolute;
	left: 50%;
	top: 0;
	transform: translateX(-50%);
	width: 100%;
	height: 85px;
	object-fit: cover;
	z-index: 1;
	pointer-events: none;
}
.header-title {
	position: relative;
	z-index: 2;
	padding-top: 0;
	font-size: 32px;
	font-weight: bold;
	color: #fff;
	letter-spacing: 8px;
	text-shadow: 0 4px 16px #1e90ff, 0 1px 0 #000;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 20px;
}

/* ä¸»ä½“å†…å®¹åŒº */
.dashboard-main {
	flex: 1;
	display: flex;
	padding: 0;
	gap: 0;
	width: 100%;
	height: 100%;
	overflow: hidden; /* éšè—æ»šåŠ¨æ¡ */
	position: relative; /* ä¸ºæµ®å±‚å®šä½åšå‡†å¤‡ */
}

.left-panel {
  background: url('@/assets/img/239.png') left;
  background-size: cover;
	width: min(320px, 22vw); /* å‡å°å®½åº¦é¿å…è¶…å‡ºå±å¹• */
	min-width: 250px; /* å‡å°æœ€å°å®½åº¦ */
	max-width: 350px; /* å‡å°æœ€å¤§å®½åº¦ */
	height: calc(100vh - 190px); /* ä½¿ç”¨è§†å£é«˜åº¦ */
	display: flex;
	flex-direction: column;
	gap: 15px;
	margin: 0;
	padding: 15px 15px 15px 25px;
	position: absolute;
	top: 60px; /* åœ¨æ ‡é¢˜ä¸‹æ–¹ */
	left: 15px; /* å‡å°å·¦è¾¹è· */
	z-index: 10;
	overflow-y: auto; /* å…è®¸å‚ç›´æ»šåŠ¨ */
}

.right-panel {
	background: url('@/assets/img/240.png') right; /* ä¿®æ­£èƒŒæ™¯å›¾ç‰‡æ–¹å‘ */
  background-size: cover;
	width: min(320px, 22vw); /* å‡å°å®½åº¦é¿å…è¶…å‡ºå±å¹• */
	min-width: 250px; /* å‡å°æœ€å°å®½åº¦ */
	max-width: 350px; /* å‡å°æœ€å¤§å®½åº¦ */
	height: calc(100vh - 190px); /* ä½¿ç”¨è§†å£é«˜åº¦ */
	display: flex;
	flex-direction: column;
	gap: 15px;
	margin: 0;
	padding: 15px 25px 15px 15px;
	position: absolute; /* ç»å¯¹å®šä½æµ®å±‚ */
	top: 60px; /* åœ¨æ ‡é¢˜ä¸‹æ–¹ */
	right: 15px; /* å‡å°å³è¾¹è· */
	z-index: 10; /* ç¡®ä¿åœ¨3Dæ¨¡å‹ä¸Šæ–¹ */
	overflow-y: auto; /* å…è®¸æ»šåŠ¨ */
}

.center-panel {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%; /* ä½¿ç”¨100%å®½åº¦è‡ªé€‚åº”çˆ¶å®¹å™¨ */
  height: 100%;
  z-index: 1; /* ç¡®ä¿3Dæ¨¡å‹åœ¨åº•å±‚ */
}

/* é¢æ¿åŒºåŸŸ */

.panel-section1 {
  /* padding: 5px; */
  backdrop-filter: blur(10px);
  height: auto;
  flex: 0 1 auto; /* æ ¹æ®å†…å®¹å¤§å°åˆ†é…é«˜åº¦ï¼Œè€Œä¸æ˜¯å¹³å‡åˆ†é… */
  display: flex;
  flex-direction: column;
  min-height: 0; /* å…è®¸flexå­å…ƒç´ ç¼©å° */
  overflow: visible; /* å…è®¸å†…å®¹æ­£å¸¸æ˜¾ç¤º */

}

.section-title {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 15px;
  position: relative;
  background: url('@/assets/img/225.png') no-repeat center;
  background-size: cover;
  text-align: center;
}

.section-title1 {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 22px;
  margin-bottom: 15px;
  position: relative;
  background: url('@/assets/img/225.png') no-repeat center;
  background-size: cover;
  text-align: center;
}


.title-text {
  /* color: #00bcd4; */
  color: #fff;
  font-size: 16px;
  font-weight: bold;
  text-align: center;
  padding: 4px 10px;
  letter-spacing: 2px;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}
/* .title-line {
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, #00bcd4 0%, transparent 100%);
} */

/* æ•°æ®å¡ç‰‡ */
.data-cards {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  flex: 1; /* ä½¿å¡ç‰‡åŒºåŸŸèƒ½å¤Ÿæ‰©å±•å’Œæ”¶ç¼© */
  min-height: 80px; /* è®¾ç½®æœ€å°é«˜åº¦ï¼Œç¡®ä¿è‡³å°‘èƒ½æ˜¾ç¤º2è¡Œå¡ç‰‡ */
  max-height: 100%; /* é™åˆ¶æœ€å¤§é«˜åº¦ä¸è¶…è¿‡çˆ¶å®¹å™¨ */
  overflow-y: hidden; /* å†…å®¹è¶…å‡ºæ—¶æ˜¾ç¤ºæ»šåŠ¨æ¡ */
  overflow-x: hidden; /* éšè—æ°´å¹³æ»šåŠ¨æ¡ */
  align-content: start; /* å¡ç‰‡ä»é¡¶éƒ¨å¼€å§‹æ’åˆ— */
}

.data-card {
  background: rgba(0, 188, 212, 0.1);
  border: 1px solid rgba(0, 188, 212, 0.3);
  border-radius: 6px;
  padding: 10px 5px 8px 12px; /* è°ƒæ•´paddingç»™å†…å®¹æ›´å¤šç©ºé—´ */
  display: flex;
  align-items: center;
  gap: 8px; /* å‡å°é—´è· */
  width: 100%; /* ä½¿ç”¨100%å®½åº¦è€Œä¸æ˜¯å›ºå®šå®½åº¦ */
  height: auto; /* è®©é«˜åº¦è‡ªé€‚åº”å†…å®¹ */
  min-height: 50px; /* è®¾ç½®åˆé€‚çš„æœ€å°é«˜åº¦ */
  max-width: 150px; /* ä¿æŒæœ€å¤§å®½åº¦é™åˆ¶ */
}

.card-icon {
  font-size: 24px;
  color: #00bcd4;
}

.card-content {
  flex: 1;
}

.card-value {
  font-size: clamp(16px, 2.5vw, 19px); /* å“åº”å¼å­—ä½“å¤§å° */
  font-weight: bold;
  color: #ffffff;
  margin-bottom: 2px; /* å‡å°é—´è· */
}

.card-label {
  font-size: clamp(10px, 1.5vw, 12px); /* å“åº”å¼å­—ä½“å¤§å° */
  color: #cccccc;
  margin-bottom: 1px; /* å‡å°é—´è· */
  line-height: 1.2; /* è°ƒæ•´è¡Œé«˜ */
}

.card-unit {
  font-size: 10px;
  color: #00bcd4;
  display: flex;
  align-items: center;
  gap: 4px;
}

/* è¿›åº¦æ¡æ•°æ® */
.progress-data {
  display: flex;
  flex-direction: column;
  gap: 12px; /* å‡å°é—´è· */
  flex: 0 0 auto; /* æ ¹æ®å†…å®¹å¤§å°ç¡®å®šé«˜åº¦ */
}

.progress-item {
  display: flex;
  align-items: center;
  gap: 15px;
}

.progress-label {
  width: 85px;
  font-size: 14px;
  color: #cccccc;
}

.progress-bar {
  flex: 1;
  height: 6px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #ffb300, #ff8f00);
  border-radius: 3px;
  transition: width 0.5s ease;
}

.progress-fill.green {
  background: linear-gradient(90deg, #49f343, #37e031);
}

.progress-fill.red {
  background: linear-gradient(90deg, #ff3d00, #dd2c00);
}

.progress-value {
  width: 40px;
  font-size: 14px;
  font-weight: bold;
  color: #ffffff;
  text-align: right;
}

/* åœ†å½¢å›¾è¡¨ */
.circle-charts {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 13px; /* å‡å°é—´è· */
  flex: 0 0 auto; /* æ ¹æ®å†…å®¹å¤§å°ç¡®å®šé«˜åº¦ */
  align-content: start; /* ä»é¡¶éƒ¨å¼€å§‹æ’åˆ— */
}

.circle-chart {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
}

.chart-circle {
  position: relative;
  width: 90px;
  height: 90px;
}

.chart-circle svg {
  transform: rotate(-90deg);
  width: 100%;
  height: 100%;
}

.chart-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.chart-fg {
  fill: none;
  stroke: #00bcd4;
  stroke-width: 8;
  stroke-linecap: round;
}

.chart-value {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 18px;
  font-weight: bold;
  color: #ffffff;
}

.chart-labels {
  text-align: center;
}

.chart-label {
  font-size: 12px;
  color: #00bcd4;
  margin-bottom: 1px;
}

.chart-data {
  font-size: 10px;
  color: #cccccc;
  line-height: 1.2;
}

/* ä¸­å¤®3DåŒºåŸŸ */
.building-3d {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1;
}

.building-model {
  max-width: 500px;
  max-height: 400px;
  filter: drop-shadow(0 0 30px rgba(0, 188, 212, 0.3));
}

/* ä¸­å¤®æ•°æ®æ˜¾ç¤º */


/* å³ä¾§å›¾æ ‡æ•°æ® */

.env-cards {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  flex: 1; /* ä½¿å¡ç‰‡åŒºåŸŸèƒ½å¤Ÿæ‰©å±•å’Œæ”¶ç¼© */
  min-height: 100px; /* è®¾ç½®æœ€å°é«˜åº¦ï¼Œç¡®ä¿è‡³å°‘èƒ½æ˜¾ç¤º2è¡Œå¡ç‰‡ */
  max-height: 100%; /* é™åˆ¶æœ€å¤§é«˜åº¦ä¸è¶…è¿‡çˆ¶å®¹å™¨ */
  align-content: start; /* å¡ç‰‡ä»é¡¶éƒ¨å¼€å§‹æ’åˆ— */
  margin-bottom: 5px;
}
.env-card {
  border-radius: 6px;
  padding: 8px 1px 4px 8px; /* å‡å°paddingä»¥é€‚åº”æ›´å°çš„ç©ºé—´ */
  display: flex;
  align-items: center;
  gap: 8px; /* å‡å°é—´è· */
  width: 100%;
  height: auto; /* è®©é«˜åº¦è‡ªé€‚åº”å†…å®¹ */
  min-height: 80px; /* è®¾ç½®åˆé€‚çš„æœ€å°é«˜åº¦ï¼Œè€ƒè™‘åˆ°å›¾æ ‡è¾ƒå¤§ */
  max-width: 150px; /* ä¿æŒæœ€å¤§å®½åº¦é™åˆ¶ */
}
.env-icon {
  width: clamp(50px, 8vw, 70px); /* å“åº”å¼å›¾æ ‡å®½åº¦ */
  height: clamp(50px, 8vw, 70px); /* å“åº”å¼å›¾æ ‡é«˜åº¦ */
  color: #00bcd4;
  flex-shrink: 0; /* é˜²æ­¢å›¾æ ‡è¢«å‹ç¼© */
}

.env-content {
  flex: 1;
}
.env-icon {
  font-size: 24px;
  color: #00bcd4;
}

.env-value {
  font-size: clamp(14px, 2.2vw, 16px); /* å“åº”å¼å­—ä½“å¤§å° */
  font-weight: bold;
  color: #ffffff;
  margin-bottom: 2px; /* å‡å°é—´è· */
}

.env-label {
  font-size: clamp(10px, 1.4vw, 12px); /* å“åº”å¼å­—ä½“å¤§å° */
  color: #cccccc;
  margin-bottom: 1px; /* å‡å°é—´è· */
  line-height: 1.2; /* è°ƒæ•´è¡Œé«˜ */
}

.env-unit {
  font-size: clamp(8px, 1.2vw, 10px); /* å“åº”å¼å­—ä½“å¤§å° */
  display: flex;
  align-items: center;
  gap: 3px; /* å‡å°é—´è· */
  border-radius: 4px; /* å‡å°åœ†è§’ */
  padding: 1px 5px; /* å‡å°padding */
}
.env-unit.green {
  background: rgba(82, 196, 26, 0.1);
  color: rgb(69, 241, 69);
}
.env-unit.yellow {
  background: rgba(248, 190, 15, 0.1);
  color: #f8c829f8;
}


/* é¥¼å›¾ */
.pie-chart-container {
  display: flex;
  align-items: center;
  gap: 30px;
}

.pie-chart {
  position: relative;
  width: 120px;
  height: 120px;
}

.pie-svg {
  width: 100%;
  height: 100%;
}

.pie-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
}

.pie-legend {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  color: #ffffff;
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 2px;
}

/* æŸ±çŠ¶å›¾ */
.bar-chart {
  display: flex;
  gap: 15px;
  height: 150px;
}

.chart-values {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  font-size: 10px;
  color: #cccccc;
  padding: 5px 0;
}

.chart-bars {
  flex: 1;
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 5px;
}

.bar-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  flex: 1;
}

.bar {
  width: 100%;
  max-width: 20px;
  border-radius: 2px 2px 0 0;
  margin-bottom: 5px;
}

.bar-blue {
  background: linear-gradient(to top, #00bcd4, #4fc3f7);
}

.bar-yellow {
  background: linear-gradient(to top, #ffb300, #ffc107);
}

.bar-label {
  font-size: 10px;
  color: #cccccc;
  text-align: center;
  writing-mode: vertical-rl;
  text-orientation: mixed;
}
/* å³ä¾§å›¾æ ‡æ•°æ® */
.icon-data {
  display: flex;
  flex-direction: column;
  gap: 12px; /* å‡å°é—´è· */
  flex: 0 0 auto; /* æ ¹æ®å†…å®¹å¤§å°ç¡®å®šé«˜åº¦ */
}

.icon-item {
  display: flex;
  align-items: center;
  gap: 15px;
  background: rgba(0, 188, 212, 0.05);
  border: 1px solid rgba(0, 188, 212, 0.2);
  border-radius: 6px;
  padding: 10px;
}

.icon-3d {
  font-size: 32px;
  color: #00bcd4;
}

.icon-info {
  flex: 1;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.info-left {
  flex: 1;
}

.icon-label {
  font-size: 15px;
  color: #ffffff;
  margin-bottom: 5px;
}

.icon-value {
  font-size: 10px;
  color: #cccccc;
  margin-bottom: 2px;
}

.icon-unit {
  font-size: 10px;
  padding: 2px 8px;
  background: rgba(82, 196, 26, 0.1);
  color: rgb(69, 241, 69);
  border-radius: 4px;
  margin-left: 10px;
}

.icon-unit.orange {
  background: rgba(248, 190, 15, 0.1);
  color: #f8cc3b;
}
.chart-container{
  width: 100%;
  height: auto; /* ç§»é™¤å›ºå®šé«˜åº¦ï¼Œè®©å®¹å™¨è‡ªé€‚åº” */
  min-height: 120px; /* è®¾ç½®æœ€å°é«˜åº¦ï¼Œé˜²æ­¢è¿‡å° */
  max-height: 300px; /* è®¾ç½®æœ€å¤§é«˜åº¦ï¼Œé˜²æ­¢è¿‡å¤§ */
}


/* å“åº”å¼è®¾è®¡ */
/* å¤§å±å¹•ä¼˜åŒ– */
@media (min-width: 1600px) {
  .left-panel, .right-panel {
    width: min(350px, 20vw);
  }
}

/* ä¸­ç­‰å±å¹• */
@media (max-width: 1400px) and (min-width: 1200px) {
  .left-panel, .right-panel {
    width: min(300px, 22vw);
    min-width: 250px;
  }
}

/* é«˜åº¦å“åº”å¼è°ƒæ•´ */
@media (max-height: 900px) {
  .data-cards {
    gap: 12px; /* å‡å°å¡ç‰‡é—´è· */
  }

  .data-card {
    min-height: 45px; /* å‡å°å¡ç‰‡æœ€å°é«˜åº¦ */
    padding: 4px 4px 4px 10px; /* è¿›ä¸€æ­¥å‡å°padding */
  }

  .card-value {
    font-size: clamp(14px, 2vw, 12px); /* è¿›ä¸€æ­¥å‡å°å­—ä½“ */
  }

  .card-label {
    font-size: clamp(9px, 1.2vw, 10px); /* è¿›ä¸€æ­¥å‡å°å­—ä½“ */
  }
  .progress-label {
    width: 60px;
    font-size: 11px;
  }
  .progress-value {
    width: 40px;
    font-size: 12px;
  }
  /* ç¯å¢ƒå¡ç‰‡å“åº”å¼è°ƒæ•´ */
  .env-card {
    min-height: 50px; /* å‡å°ç¯å¢ƒå¡ç‰‡æœ€å°é«˜åº¦ */
    padding: 1px 1px 4px 4px; /* è¿›ä¸€æ­¥å‡å°padding */
  }

  .env-icon {
    width: clamp(40px, 6vw, 45px); /* è¿›ä¸€æ­¥å‡å°å›¾æ ‡å°ºå¯¸ */
    height: clamp(40px, 6vw, 45px);
  }

  .env-value {
    font-size: clamp(12px, 1.8vw, 12px); /* è¿›ä¸€æ­¥å‡å°å­—ä½“ */
  }

  .env-label {
    font-size: clamp(9px, 1.2vw, 10px); /* è¿›ä¸€æ­¥å‡å°å­—ä½“ */
  }

  .env-unit {
    font-size: clamp(7px, 1vw, 8px); /* è¿›ä¸€æ­¥å‡å°å­—ä½“ */
  }
  .chart-circle {
    width: 70px;
    height: 70px;
  }

  .chart-container{
   min-height: 100px; /* å°å±å¹•æ—¶å‡å°æœ€å°é«˜åº¦ */
   max-height: 180px; /* å°å±å¹•æ—¶å‡å°æœ€å¤§é«˜åº¦ */
  }
  .chart-value {
    font-size: 14px;
  }

  .chart-labels {
    text-align: center;
  }

  .chart-label {
    font-size: 12px;
    color: #00bcd4;
    margin-bottom: 5px;
  }

  .chart-data {
    font-size: 10px;
    color: #cccccc;
    line-height: 1.2;
  }
    .icon-item {
      gap: 8px;
      padding: 4px;
    }
    .icon-label {
      font-size: 12px;
    }

    .icon-value {
      font-size: 10px;
    }

    .icon-unit {
      font-size: 10px;
      padding: 2px 8px;
      margin-left: 10px;
    }
}

@media (max-height: 600px) {
  .data-cards {
    gap: 6px;
  }

  .data-card {
    min-height: 40px; /* æå°å¡ç‰‡é«˜åº¦ */
    padding: 4px 1px 3px 8px;
  }

  .card-icon {
    font-size: 18px; /* å‡å°å›¾æ ‡å°ºå¯¸ */
  }

  .card-value {
    font-size: clamp(12px, 1.8vw, 14px);
    margin-bottom: 1px;
  }

  .card-label {
    font-size: clamp(8px, 1vw, 10px);
    margin-bottom: 0;
  }

  /* æå°å±å¹•ç¯å¢ƒå¡ç‰‡è°ƒæ•´ */
  .env-card {
    min-height: 80px; /* æå°ç¯å¢ƒå¡ç‰‡é«˜åº¦ */
    padding: 4px 1px 3px 5px; /* è¿›ä¸€æ­¥å‡å°padding */
    gap: 6px; /* å‡å°é—´è· */
  }

  .env-icon {
    width: clamp(35px, 5vw, 40px); /* æå°å›¾æ ‡å°ºå¯¸ */
    height: clamp(35px, 5vw, 40px);
  }

  .env-value {
    font-size: clamp(11px, 1.5vw, 13px); /* æå°å­—ä½“ */
    margin-bottom: 1px;
  }

  .env-label {
    font-size: clamp(8px, 1vw, 10px); /* æå°å­—ä½“ */
    margin-bottom: 0;
  }

  .env-unit {
    font-size: clamp(6px, 0.8vw, 8px); /* æå°å­—ä½“ */
    padding: 1px 3px; /* å‡å°padding */
  }

  /* æå°å±å¹•ä¸‹çš„å›¾è¡¨é«˜åº¦è°ƒæ•´ */
  .chart-container{
    min-height: 80px; /* æå°å±å¹•æ—¶è¿›ä¸€æ­¥å‡å°æœ€å°é«˜åº¦ */
    max-height: 120px; /* æå°å±å¹•æ—¶è¿›ä¸€æ­¥å‡å°æœ€å¤§é«˜åº¦ */
  }
}

/* å°å±å¹•é€‚é… */
@media (max-width: 1200px) {
  .left-panel, .right-panel {
    width: min(280px, 25vw);
    min-width: 220px;
  }

  .left-panel {
    left: 10px; /* å‡å°å·¦è¾¹è· */
  }

  .right-panel {
    right: 10px; /* å‡å°å³è¾¹è· */
  }
}

/* è¶…å°å±å¹•é€‚é… */
@media (max-width: 768px) {
  .left-panel, .right-panel {
    width: min(250px, 30vw);
    min-width: 200px;
  }

  .left-panel {
    left: 5px;
  }

  .right-panel {
    right: 5px;
  }
}

/* æå°å±å¹•é€‚é… */
@media (max-width: 480px) {
  .left-panel, .right-panel {
    width: min(220px, 35vw);
    min-width: 180px;
  }

  .left-panel {
    left: 2px;
  }

  .right-panel {
    right: 2px;
  }
}
</style>



